pipeline {
  agent any
  parameters {
    string(name: 'CAMUNDA_URL', defaultValue: 'CAMUNDA-URL-GOES-HERE', description: 'URL of Camunda Instance.')
  } 
  stages {
    stage('Validate Deployment Files:') {
    steps {
        script {
          def exists = fileExists "servers.json"
          echo "-------------------------------------------------------"
          echo "Looking for servers.json:"
          if (exists) {
                echo "servers.json found"
          } else {
              error("servers.json cannot be found")
          }
        }
        }
    }
    stage('Execute task in bd') {
      steps {
        script {
           servers = readJSON file: "servers.json"
           servers.each {
            server -> {
              echo '${server}'
            }
           }
        }
      }
    }
 }
}
